# NB: Login to Azure Container Registery for dev images: az login && az acr login -n crutvikling --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# NB for images to systest/test/prod use creiddev ACR: az acr login -n creiddev  --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# https://portal.azure.com/#@Nasjonalfelleslosning.onmicrosoft.com/resource/subscriptions/9c0d7873-b8aa-4042-96f8-b8ce5c9888d0/resourceGroups/rg-eid-systest-cr/providers/Microsoft.ContainerRegistry/registries/crutvikling/overview

name: eidas
networks:
  eidas:
    name: eidas
    
services:
  redis:
    image: redis:alpine
    restart: always
    ports:
      - "6400:6379"
    networks:
      - eidas
    command: redis-server --maxmemory-policy allkeys-lru

  eidas-proxy:
    build:
      context: .
      dockerfile: docker/dev.Dockerfile
      args:
        GIT_PACKAGE_TOKEN: ${GIT_PACKAGE_TOKEN}
        GIT_PACKAGE_USERNAME: ${GIT_PACKAGE_USERNAME}
    environment:
      - ENVIRONMENT=docker
      - REDIS_HOST=redis
      - REDIS_PORT=6379
      - TRUSTSTORE_PASSWORD=changeit
      - TRUSTSTORE_BASE64=MIIDwgIBAzCCA2wGCSqGSIb3DQEHAaCCA10EggNZMIIDVTCCA1EGCSqGSIb3DQEHBqCCA0IwggM+AgEAMIIDNwYJKoZIhvcNAQcBMGYGCSqGSIb3DQEFDTBZMDgGCSqGSIb3DQEFDDArBBRQ6pkDm2fgo3n7eNrnPJ4UH5Lj6gICJxACASAwDAYIKoZIhvcNAgkFADAdBglghkgBZQMEASoEEK6pm2rh3fBQb4GOgFlB9cyAggLAGZ4NCPGBnp96mvajiLyGjn25iW12Z9IQ3E4eICTTltlpECGk9Tu9mHqUZ9YdzASVzI7Q5FcaxMkX1H51YjZUZ2A1f7c7HVzojulyf9vntCMtjzD1TbnA4A4Ec4Z8YOJhEyzlGU9OH+KFCYoivG73b+sMP/504ogWZSeGFbjrFRX0dw332OsWnOxlQQVHohMMojyjlgYcuex+d8mbNhgaDpwj2SglppdfouTcxDVbl82IJDqJUhox2ctfqWGv2fDk8RB3rygT2gcNSVmhf4KpgbDDipVTVE9xfLqCqEWregdZVW81mYh9L8FN/5ZQo88237CLkCbbXU7xfFQikG/fpAKsTyYCaPFOuvNpeDavc8BY04hkRUii43eBrq4BTZLBcRqOJ+h8sYsntZaENxiUTgAGEgReIPhILNeZxZefvVRxTOqCCFatEJztnC8jhU37rXiPMsFrVVOc/lQ9lyd1A7ODSXMNk/yD/3XOCBl0ZPd637uwqvp5dEi9335huL2pEQkBMSwajXRVuXL9fqJHf1Ud9KzIgwQ6gexiZ4hkVSjStmyjL3426dVm44hvdQR2PppZl90OzoESDbifCYgevZhkL3R/NtjHuy08Rh0XxBn3mP0gto+FlicPUkUo+VECl6p3STAoFT34pkfm12dGK0XYD8gtJN0x98+8R5InBqB3MPUmZ2cwgdeTexsA8BgDgnN4zHg7Lgg5glZcYXH52oyQs1TeazUPPxv+w3m6EAZlFBVZei+Nu6ywjAvpB1YZ36wgOvmlBLtY8xBcupZWqLl8vkm8ZV75A2n2HLi8iy8lsqgp0CDmTldgk327hKpOLCEJUaCeIz8d9qHvG4jqoILvq6ayqdMZTdink7QSOcVOo+kmP0SxhGfi4M+AlCEEkXMrXgU1VikkETgpsnVlb/Bf6bppBtcEAEuF6uQMNA8wTTAxMA0GCWCGSAFlAwQCAQUABCDRKF3YbxSLBcwKXHvjcbQ3TBHXM6STHRW7sd5ROEgOoAQUOhCnsJ8/seTl9LnkZG7+Pbg2dAwCAicQ
      - SIGN_KEYSTORE_PASSWORD=changeit
      - SIGN_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_KEYSTORE_BASE64=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
      - SIGN_METADATA_KEYSTORE_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_BASE64=MIISDgIBAzCCEbgGCSqGSIb3DQEHAaCCEakEghGlMIIRoTCCClgGCSqGSIb3DQEHAaCCCkkEggpFMIIKQTCCCj0GCyqGSIb3DQEMCgECoIIJwDCCCbwwZgYJKoZIhvcNAQUNMFkwOAYJKoZIhvcNAQUMMCsEFGozLAK9Wg9STaXgm3c8F+shZ7d6AgInEAIBIDAMBggqhkiG9w0CCQUAMB0GCWCGSAFlAwQBKgQQTxhHP6DmW7hr4ndyUz1JlASCCVCVSsJ4KLqRDl21E5WzkWl0Tdfu2EPVTUXGQ+7ZpudVvCM3Lb4v23IKO9y0GPiVZX+4u6ej0LHXOQtgvEetiiReH2aefHBjijM7etTQRdAf8az80y02ACEphHllNLUlbyAiJnqfG9yKxd5BALZcoBDDLGty59ADyztCQTgf3NAPeHnzvZoNPM8du/t6sWSkE/3jUAcoDPr0XLphJ91p/sDqzMFYIOEKjnF7Pqfc0OdCHePgDRr6t0AMXLVW1mxiqR+fl9xcFHTrJvaUlKurvaloyE4bTfRw6k3g4XiO0sIJ6SdVHXI3PurJ7O7kwvckGrFHCKkFiKNTaPmFGz5wzmYqDrDr69oXq+fp3ABynmG5TdAfvJzb+sKhCKT1dFsPlUb4L6jgd7Q4d4xwmAwdwJzJ07/i0zdmFnkmDr+FNPkD2+meXm/O+q0Ym7veoAqUHnmkqdNoEdNcbfA/yK0TmvfJkOSqyDN9HxI8GX66FEj8k/O/XivpJh3NanXwZ/KurcJtcD7jnHMutK+c0gcoR6/TL4XhZjb/gTd7ycmBQcF3nHoRF6HWMfCTmdI6XxEcc4igGkFkksGvuwVmpMUksdtz5NfDzb94h+QMOJ243fafk7xw5N46VinzgdWb1KKc/+tXZCgVDY7kqPIwIXd2tDLlOlsRMmzG87i3k6CGEnGG8Q5LQinJVeTPUEvJ+c8Zjl4DEt4P7wuGtgzRhJ81oFlKAVFM4UAp70hxoIWW/Jk9N/nGk7Jia3/5mAqafJgxvmZ+dTO0um2CD7WYZRmANCEL3bNkl3AxoOi7ZX3Y+bsXoebICQuuXEqmz2nh3162f9kKxp9oH8MuhYFq4YZQKQ8JJnYQHuXHXsbgHTmfULTbkBn0K/7UYLnMEW101AzWbUwJ8PSwbq/4iwh37XGV/+IY4O6OAgTeAqgrkyBRmQkBr0oq3DJAUlhblhDIf/hemzirMM4tuKJwgv0HATOMwuGf1rVATcp246G8degu82IaRmp/zzORzWrC7qPwrzf2jtOk98RCmWBo6D0ZjW42V4lGo3DxDZxfnz4xCStz0ms3WKwKMsBBTPOVB4Fz1SVKd83HDtBzKv/6z5KHxDNjbfVQTpUZWdL+wjK3fsb/lU3MfdUJlynQAt7MScS+RL665VIa6UBtc4LQNjfhawYuCcDKdoHYXxD2SryOUicIPIvE4xdFyKvvE3HOyBVQFlCGWCYiEi0XCkA5c7mY3In/GBPWk7om2GJmy/0IZyJ81mYFoZCLL28Zg/Ovs4UGFHMyKAalRW94V71gHFKTVLFCuLBpRbpT2EatT7NSRq6R6f1ieBU4ogR+N+Kxrdky+HRSIsgOmyE7PVNgrcam+Y6YczxeJCK5up2vlBvAB1gv9W4G2BEb5JAMNO3/zI5CAyW0GiL5D8+DRvhx1L9uZAwAavs1TZ60HgqT2S9UCJ4wjvYzDyqQJOnPu5vZ5/28aC0sxPcQxj7PCTyZfG3Ztwip2wTcLdVA1RfOBWO41Px6rGpxV8lTak64g8bAbq+BgIHcEvP1nLLKzteU4Q/rwnvJTUIxKaT0Q1w4IhxBU/azd0TSCjiYGo6f4F7xx54sVPMkLNmM2T9YjxYeuVm2+V356Vb23qDAX5WyWzcJSeicIzV25QPSsVf59GKew0PlpHD+tsJEkGyml/GY0DkDQR+Rf9GUJ4u0WvRMwHXNmMb6jtfjC9ATqDTw9aaV2WBc07BMOes8j170vte9vpjasYWxVb26PZ/n9/iVoI6v5DowESGYsWmgqGuptBgJopNTv9Ga3OJEFWiEC9IRDT/v0oFI/K8CxFgz4jQhJuRAjploq3qLEBjgf+1stTHawQOgDLdwMrvplzIvT580xGHor3vBBOL1MLSUVv7sWNtLs/j+cNA1RDMW57JNTDpaj6kTLQKvxZDlrG7Vx8eNIhEwdiohBbiCN/LbBNGR9Mqr7Ic3iKial0WAziR5TW3yV+e4tWNRGLR6rZDNPOP5Drhx6j49WDWpneSGN3/1TFK/fk7TYGNEdLHkARz2cuSFipyzTFm6aHEWLCzp9OBlp6xkHCo59P1pTpB1XjZcGCeKurygtYeV72mO27LWSLy7stvcWevcff+ncorQvDTsI4x8hoOc0TdTIfnQRX5UONLPR0sDIjubIL+db6bAwb8dpKqyJhKzPgbEeMMUxFtWw6fwPl0xLvoIz5z7aByOUeuji6EQi0QzSVFx3bLDoSP9ljAJ03r+464qwQsh7+U6fUxOdAp52t+vThHwz8DRp18Zjp5sVJus/B0nTRqBI+1ekPvJimyng2bfZFY2Mq560L/H9QxytCmQkzpSoVJZTXJQ9Eq2Zjt6SpJD0NHys584J6xnWG76BnZCXZQY+QHbtbkh6OKhFoN1h2bjmzUY7XRdLsD0BQYVeLudn5m/TrFyiVDma3fPYasX/vd3jZS2IP5KgX/WnshFZxMzPYoHn5sjByDK3mV8r6zSTHs2EXJkbXqIpguVMzJlxjZjBRZHWg3N4ohat4smSt6YX4eRWBU4j6dgbKdah0yecJQ8i+oo4EJdVCoq+KQDdfjIQ6Vq7Hr/l7tsi76vzTIS/Adwovru7ypnNFIuQHXSkTTRqi6R7N18H81MAGQXvdgaTl0Fq1HRirmI7bfChSBI00Sz9K9rX5Q8St/shzUqiSev1VEWDW0l87CKKL5jiW0S0Y7eZuwV2liYf9cf7sCsquwTmFft/Ixn3MeZ2sBuv79PgRfIAA8me3qiXNvPh0UOs6r40QMQzkIyV5kEVgSdOhKlwAK5VhLSdqKproKE9MniC/6VJTChKBAoK9SHWiLQacETJ3S/iseQKoAoWwAL07VTzKachzU7+VFad6pMQUObAC6MLXM8xDfh32xN1ameAI5+rRun4oaBvW7InAJ1mjLQRBzpsqvZ9RGLvDwIU3k7DZXWXew1uqI3PjQi+IMaJ+xJKwwWEt4HcegbU3tPvAHHKGN1L//2aLV0DBcP+hwfMKeDWjOopOygm9DudfO6O1jnIzI24mYs142L+FYIhgxUDLPo8bYNvKsD/j202tEcETQjVuLHFzoCtCPYqkFodb/YSQsCc9j3iGD9M/P4zFJfPwmihuaaflsUlFyNc6p4vqT7H+46l/0SWKnY9n+DydeY1G6+n8b39HV5JUK2RfZ9nTuw5YTllAlwbzFqMEUGCSqGSIb3DQEJFDE4HjYAZQBpAGQAYQBzAC0AbgBvAGQAZQAtAG0AZQB0AGEAZABhAHQAYQAtAHMAeQBzAHQAZQBzAHQwIQYJKoZIhvcNAQkVMRQEElRpbWUgMTcyNDIyMjczODY2MzCCB0EGCSqGSIb3DQEHBqCCBzIwggcuAgEAMIIHJwYJKoZIhvcNAQcBMGYGCSqGSIb3DQEFDTBZMDgGCSqGSIb3DQEFDDArBBTMbhDzfFYvO5GIsoQkjBuhGodCjwICJxACASAwDAYIKoZIhvcNAgkFADAdBglghkgBZQMEASoEEOWOy7613qR/ows5wqJ0ApaAggaw4WbM3jLW9YieKNyzGGzyqixt5GC7dNz41/qNI57gMZPv8fvrflYJuwtEuuCq5uHzJAmqXRQGvvUYBbXl9iM/IzKc/NsAtPS0rjWOLcJ2wL2jWlAjyUo8vnxc3jpFdKH5prbkWGFiKsrddT4P1N1h6Mp6TpamqHgZScTmKFuv3Vr2e94JbOXrM6V1U4HlYkILv31ZJayNSzuTaszEKVAUOy/VJxlcZMuHl3XAmfdz9Mjjqi2AmNvlzWSzG7SX+tHckZZC2c3isnFPCObfC3ETJsj9VX9rYbe+dcHlpjzmZ17GIT7YtV4A1d9jf7e8tMHQDbhJpCT3fWfyBAyywsNMWEkF2qLvoGpJrksv2im+CkFCwMAnsHF8xUbe/OBReVKu7D6EMaebcy2UU4eRYy32qFLLGUh8dwilNF2GTPlcRHG2tMxK4dVRpkPMgysbEztq1ddDlkxLc06GllfBs8g4OStpXknMdtnovdHZO0Me2rZreKnH0rgKC0CfSRv8shO4SEk2AIyBjJXC6BBuV3eExNqfIVkJ8ZAX2oovWnJexXgZlqRPYC07tggtNux8M/nLOJahs/kgTaRTy1gcw/rJJ4ZSlbxKONoX+diuUqjOTODPSrIdgV13/4epFkKHibMfqskcSq04XhjijpQjvs4fLPmLwhk0YfVdV9XdeoZzwKbVU02egcbyF/j149W0vhmGIT0OT+a5DMPY9vPyFxwmW3mmxC19eQtI9QiyANfPMMoNGjRktMxWuPE2a2XsXRLX7DWW6OIG/iCEWg5JfEG16gsjkKNPRLfj7UmVlxV/pduz9ITYACQBOGFEH/XGEDHUbWetBDdyhLAz8L8tTyVemKZ0I/+ybLle/6ydoJxQLZ9cOGxnjmiQBvm9/jdoIXP4hL4bv2B35L9YDH0fKKnvSJA2ecE7mybtf6vHQLEx2+7M/r2ROrLC+lI62wVNnA2n56WOg+WMqhSQstOzo779KFEIYmhnHHdVULUb7vjGDPkAr+PVKW8icrbDL1dbxSXyCNLFUJr4GylnMCCeUQyiOQXBG1kyesS0zo2hfK/PCOj4JgaV6K1gKZ3cOCjJyLTbu3SkIFauR0//lRGiM5hP21uyZ9/3xRH6wM0RtySogSAHXZZHEH6H/J+rp7xRo5fCKpWi5GJ7M+I39u1KhbrFn5L8ZBMsnayVwNz5CWZn5P84JA2SFDFMT9fk8e94qsYfNbO/+xh8IA3Nb+BxUm6fsguDfHnJaHIKsVoyV77QyZ4TFV4p3XigpDHspphIU4KX5zFxkxFRgYTiJZs44DD2xPsXxycWCoziFocZ3bxpOHC0w1zEdJtVKg2I2D7vlauW821RFI1M/zVKoIdgJlxpFGaGAAJG8U/dVHbzIO/9AcopbsG1k6WcF2CYqUFoHOlycXbDlfaBx28SinU15wBZd73MrOVmU53DnWaIGOPphnl70a6JYd7Ur3skJBlLYaOmYC19lEUeonnK7Lqj8Thms2CH+WBXQd4uwDPnwRerx7wVpLoLQT3SEluR1/AGuPBLlZuxsoLUBt2vtPqHkqq/coKkf0JQq6ENCgEuNnHDA6HzTaZaGotoVNBU5QJBs7k6+adNKez3I4vSwsazdzXD5z7nx73WgVFFTyFmVWSmZNxQm8FNfxgFaF2XgLCszbd5j/G1LgEkYLgzZdoNz6WEakm4cY4UBC+9bGuLuHA2glINzP+277UN1gjnXzQxE56zEFVzaerxHXX9pJ+BTy71sC1zyXTFlo1gyorY1d7HXIrhOoOKekqLThFypdIfREzM5CGhU3mOhxWVPYQEBbV4IRI5fpMbEZa3MVJWQ12V1+xOvzdlXLbw2RZdf0uZwACunFlYPEfcC7JexcZ+APkkHUj/XwfczlPrbL38IPEa/dMjWVVwSAiLhSbUOu+OKVCJLusel82YGJ0F8VNGD7FFr0iCkSBXxwNu1ZnW/Sgx7eZd1gS8aY8UDfFQzu8KXBLhZcTU03L+7mG1mtgtcI1LEX3UCNC/96ZhJ5NqAj8JVIbSIGNe5DkbV+JJtacgbd/7Ipt7VAm6UqtOgEHoOyaG19YRh7bRQ/Jd+NAlrPzUFNL83a6JSLOqsUZfgJQbwIQ1eta+Q2W3FQscEhzGI8cRiad9W+9xF3frBk2t90Vq3AfarBAi8WYh0Y6sGnfsDbxVa2lphLxN2TA0lxpgekUVd0BABFEBmcJqdccpjY34mI/TL9Sc2a5Xaio7UgGSmeqgguwCaZNxjBDKbuCVnhO30D4I1agPfvfkzZcyDNcep28wTTAxMA0GCWCGSAFlAwQCAQUABCB4pZR0zBN5tfiLcE4CXMYNSDoONRtY4P6dDCoVeILvNgQUVOzUfQrFsqWxC1HVXNgkRBdqUt4CAicQ
      - LIGHT_TOKEN_PROXYSERVICE_REQUEST_SECRET=mySecretProxyserviceRequest
      - LIGHT_TOKEN_PROXYSERVICE_RESPONSE_SECRET=mySecretProxyserviceResponse
      - CATALINA_OPTS=-Xms512m -Xmx1024m -DappEnvironment=$${ENVIRONMENT} -DredisPassword=$${REDIS_PASSWORD} -DredisPort=$${REDIS_PORT} -DredisHost=$${REDIS_HOST} -DlightTokenProxyserviceRequestSecret=$${LIGHT_TOKEN_PROXYSERVICE_REQUEST_SECRET} -DlightTokenProxyserviceResponseSecret=$${LIGHT_TOKEN_PROXYSERVICE_RESPONSE_SECRET}
    ports:
      - "8082:8082"
    healthcheck:
      test: wget --no-verbose --tries=1 http://eidas-proxy:8082/ServiceMetadata || exit 1
      interval: 5s
      start_period: 8s
      timeout: 5s
      retries: 20
    networks:
      - eidas
    entrypoint: "/bin/bash -c"
    command:
      - |
        cd /usr/local/tomcat
        ./bin/addEnvironmentSpesificConfigFiles.sh
        ./bin/updateKeyStoreConfig.sh
        ./bin/catalina.sh run


