# NB: Login to Azure Container Registery for dev images: az login && az acr login -n crutvikling --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# NB for images to systest/test/prod use creiddev ACR: az acr login -n creiddev  --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# https://portal.azure.com/#@Nasjonalfelleslosning.onmicrosoft.com/resource/subscriptions/9c0d7873-b8aa-4042-96f8-b8ce5c9888d0/resourceGroups/rg-eid-systest-cr/providers/Microsoft.ContainerRegistry/registries/crutvikling/overview

name: eidas
networks:
  eidas:
    name: eidas
    
services:
  redis:
    image: redis:alpine
    restart: always
    ports:
      - "6400:6379"
    networks:
      - eidas
    command: redis-server --maxmemory-policy allkeys-lru

  eidas-proxy:
    build:
      context: .
      dockerfile: docker/dev.Dockerfile
      args:
        GIT_PACKAGE_TOKEN: ${GIT_PACKAGE_TOKEN}
        GIT_PACKAGE_USERNAME: ${GIT_PACKAGE_USERNAME}
    environment:
      - ENVIRONMENT=docker
      - REDIS_HOST=redis
      - REDIS_PORT=6379
      - TRUSTSTORE_PASSWORD=changeit
      - TRUSTSTORE_BASE64=MIIDwgIBAzCCA2wGCSqGSIb3DQEHAaCCA10EggNZMIIDVTCCA1EGCSqGSIb3DQEHBqCCA0IwggM+AgEAMIIDNwYJKoZIhvcNAQcBMGYGCSqGSIb3DQEFDTBZMDgGCSqGSIb3DQEFDDArBBRQ6pkDm2fgo3n7eNrnPJ4UH5Lj6gICJxACASAwDAYIKoZIhvcNAgkFADAdBglghkgBZQMEASoEEK6pm2rh3fBQb4GOgFlB9cyAggLAGZ4NCPGBnp96mvajiLyGjn25iW12Z9IQ3E4eICTTltlpECGk9Tu9mHqUZ9YdzASVzI7Q5FcaxMkX1H51YjZUZ2A1f7c7HVzojulyf9vntCMtjzD1TbnA4A4Ec4Z8YOJhEyzlGU9OH+KFCYoivG73b+sMP/504ogWZSeGFbjrFRX0dw332OsWnOxlQQVHohMMojyjlgYcuex+d8mbNhgaDpwj2SglppdfouTcxDVbl82IJDqJUhox2ctfqWGv2fDk8RB3rygT2gcNSVmhf4KpgbDDipVTVE9xfLqCqEWregdZVW81mYh9L8FN/5ZQo88237CLkCbbXU7xfFQikG/fpAKsTyYCaPFOuvNpeDavc8BY04hkRUii43eBrq4BTZLBcRqOJ+h8sYsntZaENxiUTgAGEgReIPhILNeZxZefvVRxTOqCCFatEJztnC8jhU37rXiPMsFrVVOc/lQ9lyd1A7ODSXMNk/yD/3XOCBl0ZPd637uwqvp5dEi9335huL2pEQkBMSwajXRVuXL9fqJHf1Ud9KzIgwQ6gexiZ4hkVSjStmyjL3426dVm44hvdQR2PppZl90OzoESDbifCYgevZhkL3R/NtjHuy08Rh0XxBn3mP0gto+FlicPUkUo+VECl6p3STAoFT34pkfm12dGK0XYD8gtJN0x98+8R5InBqB3MPUmZ2cwgdeTexsA8BgDgnN4zHg7Lgg5glZcYXH52oyQs1TeazUPPxv+w3m6EAZlFBVZei+Nu6ywjAvpB1YZ36wgOvmlBLtY8xBcupZWqLl8vkm8ZV75A2n2HLi8iy8lsqgp0CDmTldgk327hKpOLCEJUaCeIz8d9qHvG4jqoILvq6ayqdMZTdink7QSOcVOo+kmP0SxhGfi4M+AlCEEkXMrXgU1VikkETgpsnVlb/Bf6bppBtcEAEuF6uQMNA8wTTAxMA0GCWCGSAFlAwQCAQUABCDRKF3YbxSLBcwKXHvjcbQ3TBHXM6STHRW7sd5ROEgOoAQUOhCnsJ8/seTl9LnkZG7+Pbg2dAwCAicQ
      - SIGN_KEYSTORE_PASSWORD=changeit
      - SIGN_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_KEYSTORE_BASE64=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
      - SIGN_METADATA_KEYSTORE_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_BASE64=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
      - LIGHT_TOKEN_PROXYSERVICE_REQUEST_SECRET=mySecretProxyserviceRequest
      - LIGHT_TOKEN_PROXYSERVICE_RESPONSE_SECRET=mySecretProxyserviceResponse
      - CATALINA_OPTS=-Xms512m -Xmx1024m -DappEnvironment=$${ENVIRONMENT} -DredisPassword=$${REDIS_PASSWORD} -DredisPort=$${REDIS_PORT} -DredisHost=$${REDIS_HOST} -DlightTokenProxyserviceRequestSecret=$${LIGHT_TOKEN_PROXYSERVICE_REQUEST_SECRET} -DlightTokenProxyserviceResponseSecret=$${LIGHT_TOKEN_PROXYSERVICE_RESPONSE_SECRET}
    ports:
      - "8082:8082"
    healthcheck:
      test: wget --no-verbose --tries=1 http://eidas-proxy:8082/ServiceMetadata || exit 1
      interval: 5s
      start_period: 8s
      timeout: 5s
      retries: 20
    networks:
      - eidas
    entrypoint: "/bin/bash -c"
    command:
      - |
        cd /usr/local/tomcat
        ./bin/addEnvironmentSpesificConfigFiles.sh
        ./bin/updateKeyStoreConfig.sh
        ./bin/catalina.sh run


