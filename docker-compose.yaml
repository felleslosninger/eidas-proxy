# NB: Login to Azure Container Registery for dev images: az login && az acr login -n crutvikling --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# NB for images to systest/test/prod use creiddev ACR: az acr login -n creiddev  --subscription 0d8a0177-44ad-4a25-a38f-9489f3874db0
# https://portal.azure.com/#@Nasjonalfelleslosning.onmicrosoft.com/resource/subscriptions/9c0d7873-b8aa-4042-96f8-b8ce5c9888d0/resourceGroups/rg-eid-systest-cr/providers/Microsoft.ContainerRegistry/registries/crutvikling/overview

name: eidas
networks:
  eidas:
    name: eidas
    
services:
  redis:
    image: redis:alpine
    restart: always
    ports:
      - "6400:6379"
    networks:
      - eidas
    command: redis-server --maxmemory-policy allkeys-lru

  eidas-proxy:
    build:
      context: .
      dockerfile: docker/dev.Dockerfile
      args:
        GIT_PACKAGE_TOKEN: ${GIT_PACKAGE_TOKEN}
        GIT_PACKAGE_USERNAME: ${GIT_PACKAGE_USERNAME}
    environment:
      - ENVIRONMENT=docker
      - REDIS_HOST=redis
      - REDIS_PORT=6379
      - TRUSTSTORE_PASSWORD=changeit
      - TRUSTSTORE_BASE64=MIIDwgIBAzCCA2wGCSqGSIb3DQEHAaCCA10EggNZMIIDVTCCA1EGCSqGSIb3DQEHBqCCA0IwggM+AgEAMIIDNwYJKoZIhvcNAQcBMGYGCSqGSIb3DQEFDTBZMDgGCSqGSIb3DQEFDDArBBRQ6pkDm2fgo3n7eNrnPJ4UH5Lj6gICJxACASAwDAYIKoZIhvcNAgkFADAdBglghkgBZQMEASoEEK6pm2rh3fBQb4GOgFlB9cyAggLAGZ4NCPGBnp96mvajiLyGjn25iW12Z9IQ3E4eICTTltlpECGk9Tu9mHqUZ9YdzASVzI7Q5FcaxMkX1H51YjZUZ2A1f7c7HVzojulyf9vntCMtjzD1TbnA4A4Ec4Z8YOJhEyzlGU9OH+KFCYoivG73b+sMP/504ogWZSeGFbjrFRX0dw332OsWnOxlQQVHohMMojyjlgYcuex+d8mbNhgaDpwj2SglppdfouTcxDVbl82IJDqJUhox2ctfqWGv2fDk8RB3rygT2gcNSVmhf4KpgbDDipVTVE9xfLqCqEWregdZVW81mYh9L8FN/5ZQo88237CLkCbbXU7xfFQikG/fpAKsTyYCaPFOuvNpeDavc8BY04hkRUii43eBrq4BTZLBcRqOJ+h8sYsntZaENxiUTgAGEgReIPhILNeZxZefvVRxTOqCCFatEJztnC8jhU37rXiPMsFrVVOc/lQ9lyd1A7ODSXMNk/yD/3XOCBl0ZPd637uwqvp5dEi9335huL2pEQkBMSwajXRVuXL9fqJHf1Ud9KzIgwQ6gexiZ4hkVSjStmyjL3426dVm44hvdQR2PppZl90OzoESDbifCYgevZhkL3R/NtjHuy08Rh0XxBn3mP0gto+FlicPUkUo+VECl6p3STAoFT34pkfm12dGK0XYD8gtJN0x98+8R5InBqB3MPUmZ2cwgdeTexsA8BgDgnN4zHg7Lgg5glZcYXH52oyQs1TeazUPPxv+w3m6EAZlFBVZei+Nu6ywjAvpB1YZ36wgOvmlBLtY8xBcupZWqLl8vkm8ZV75A2n2HLi8iy8lsqgp0CDmTldgk327hKpOLCEJUaCeIz8d9qHvG4jqoILvq6ayqdMZTdink7QSOcVOo+kmP0SxhGfi4M+AlCEEkXMrXgU1VikkETgpsnVlb/Bf6bppBtcEAEuF6uQMNA8wTTAxMA0GCWCGSAFlAwQCAQUABCDRKF3YbxSLBcwKXHvjcbQ3TBHXM6STHRW7sd5ROEgOoAQUOhCnsJ8/seTl9LnkZG7+Pbg2dAwCAicQ
      - SIGN_KEYSTORE_PASSWORD=changeit
      - SIGN_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_KEYSTORE_BASE64=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
      - SIGN_METADATA_KEYSTORE_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_KEY_PASSWORD=changeit
      - SIGN_METADATA_KEYSTORE_BASE64=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
      - LIGHT_TOKEN_PROXYSERVICE_REQUEST_SECRET=mySecretProxyserviceRequest
      - LIGHT_TOKEN_PROXYSERVICE_RESPONSE_SECRET=mySecretProxyserviceResponse
      - CATALINA_OPTS=-Xms512m -Xmx1024m -DappEnvironment=$${ENVIRONMENT} -DredisPassword=$${REDIS_PASSWORD} -DredisPort=$${REDIS_PORT} -DredisHost=$${REDIS_HOST} -DlightTokenProxyserviceRequestSecret=$${LIGHT_TOKEN_PROXYSERVICE_REQUEST_SECRET} -DlightTokenProxyserviceResponseSecret=$${LIGHT_TOKEN_PROXYSERVICE_RESPONSE_SECRET}
    ports:
      - "8082:8082"
    healthcheck:
      test: wget --no-verbose --tries=1 http://eidas-proxy:8082/ServiceMetadata || exit 1
      interval: 5s
      start_period: 8s
      timeout: 5s
      retries: 20
    networks:
      - eidas
    entrypoint: "/bin/bash -c"
    command:
      - |
        cd /usr/local/tomcat
        ./bin/addEnvironmentSpesificConfigFiles.sh
        ./bin/updateKeyStoreConfig.sh
        ./bin/catalina.sh run


